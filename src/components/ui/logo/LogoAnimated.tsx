'use client'
//appbora/src/components/ui/LogoAnimated.tsx
import { useTheme } from '@mui/material/styles'
import { motion, Variants } from 'framer-motion'
import { useRouter } from 'next/navigation'

interface LogoProps {
    size?: number
}

export default function LogoAnimated({ size = 40 }: LogoProps) {
    const theme = useTheme()
    const isDarkMode = theme.palette.mode === 'dark'
    const router = useRouter()

    // --- ANIMAÇÃO ---
    // 1. Variante para o container dos pontos.
    //    Orquestra a animação dos filhos com `staggerChildren`.
    const typingContainerVariants: Variants = {
        initial: {},
        animate: {
            transition: {
                // A DURAÇÃO TOTAL DA ANIMAÇÃO DOS FILHOS
                // (último ponto começa) + (duração de um ponto)
                // (0.3s * 2) + 1.2s = 1.8s
                duration: 1.8,
                staggerChildren: 0.3,
                repeat: Infinity,      // Agora isso vai funcionar
                repeatDelay: 0.5,
            }
        }
    }

    // 2. Variante para cada ponto individual.
    //    Define a animação de "aparecer e sumir".
    const typingDotVariants: Variants = {
        initial: { opacity: 0, y: 5 }, // Começa invisível e um pouco abaixo
        animate: {
            opacity: [0, 1, 1, 0], // Fica visível por um tempo e depois some
            y: [5, 0, 0, 5],
            transition: {
                duration: 2, // Duração da animação de um ponto
                ease: "easeInOut",
                repeat: Infinity
            }
        }
    }

    // --- FIM DA NOVA ANIMAÇÃO ---
    const balloonVariants: Variants = {
        rest: { x: 0 },
        hover: { x: [-1, 1, -1, 1, 0], transition: { duration: 0.4, repeat: Infinity } },
        interval: {
            rotate: [0, 0.5, -0.5, 0],
            transition: { duration: 5, repeat: Infinity, delay: 5 }
        }
    }

    return (
        <motion.div
            style={{ width: size, height: size, cursor: 'pointer' }}
            variants={balloonVariants}
            initial="rest"
            whileHover="hover"
            animate="interval" // Animação do balão
            onClick={() => router.push('/')}
        >
            <svg width="100%" height="100%" viewBox="0 0 642 643" fill="none" xmlns="http://www.w3.org/2000/svg">
                {isDarkMode ? (
                    <>
                        {/* Versão Dark */}
                        <path d="M352.422 32.5C500.52 32.5 609.5 178.24 609.5 342.829C609.5 394.704 579.687 436.787 541.109 469.074C502.399 501.473 450.954 527.503 397.683 547.821C291.35 588.378 168.716 609.5 102.178 609.5C87.0585 609.5 72.8001 608.924 62.1855 605.899C57.4532 604.551 46.3347 600.872 38.8379 589.945C29.2589 575.984 32.4856 561.492 35.9287 553.8C38.9579 547.032 43.4897 541.865 46.1543 538.995C49.2278 535.685 52.7409 532.406 55.9189 529.516C62.856 523.206 69.5076 517.514 77.0127 510.147C91.7229 495.708 104.656 479.465 110.5 460.34C115.941 442.532 116.348 418.607 99.0732 385.729L98.5449 384.724L98.0879 383.685C52.1197 279.047 81.3762 188.934 139.93 127.012C196.638 67.0408 281.332 32.5 352.422 32.5Z"
                            fill="white" stroke="white" strokeWidth="20" />
                        {/* 3. Container dos pontos */}
                        <motion.g variants={typingContainerVariants} initial="initial" animate="animate">
                            {/* Ponto 1 */}
                            <motion.path
                                variants={typingDotVariants}
                                d="M270.466 323.831C265.704 323.831 261.338 322.64 257.369 320.259C253.4 317.878 250.225 314.703 247.844 310.734C245.621 306.765 244.51 302.479 244.51 297.875C244.51 293.112 245.621 288.826 247.844 285.016C250.225 281.047 253.4 277.872 257.369 275.491C261.338 273.109 265.624 271.919 270.228 271.919C275.308 271.919 279.753 273.109 283.563 275.491C287.532 277.872 290.628 281.047 292.85 285.016C295.232 288.826 296.422 293.112 296.422 297.875C296.422 302.479 295.232 306.765 292.85 310.734C290.628 314.703 287.532 317.878 283.563 320.259C279.753 322.64 275.387 323.831 270.466 323.831Z"
                                fill="#913ff5ff" />
                            {/* Ponto 2 */}
                            <motion.path
                                variants={typingDotVariants}
                                d="M340.984 323.831C336.222 323.831 331.856 322.64 327.887 320.259C323.918 317.878 320.743 314.703 318.362 310.734C316.139 306.765 315.028 302.479 315.028 297.875C315.028 293.112 316.139 288.826 318.362 285.016C320.743 281.047 323.918 277.872 327.887 275.491C331.856 273.109 336.142 271.919 340.746 271.919C345.826 271.919 350.271 273.109 354.081 275.491C358.05 277.872 361.146 281.047 363.368 285.016C365.75 288.826 366.94 293.112 366.94 297.875C366.94 302.479 365.75 306.765 363.368 310.734C361.146 314.703 358.05 317.878 354.081 320.259C350.271 322.64 345.906 323.831 340.984 323.831Z"
                                fill="#913ff5ff" />
                            {/* Ponto 3 */}
                            <motion.path
                                variants={typingDotVariants}
                                d="M411.502 323.831C406.74 323.831 402.374 322.64 398.405 320.259C394.436 317.878 391.261 314.703 388.88 310.734C386.657 306.765 385.546 302.479 385.546 297.875C385.546 293.112 386.657 288.826 388.88 285.016C391.261 281.047 394.436 277.872 398.405 275.491C402.374 273.109 406.66 271.919 411.264 271.919C416.344 271.919 420.789 273.109 424.599 275.491C428.568 277.872 431.664 281.047 433.886 285.016C436.268 288.826 437.458 293.112 437.458 297.875C437.458 302.479 436.268 306.765 433.886 310.734C431.664 314.703 428.568 317.878 424.599 320.259C420.789 322.64 416.424 323.831 411.502 323.831Z"
                                fill="#913ff5ff" />
                        </motion.g>
                    </>
                ) : (
                    <>
                        {/* Versão Light */}
                        <path d="M352.422 32.5265C500.52 32.5265 609.5 178.266 609.5 342.856C609.5 394.731 579.687 436.813 541.109 469.101C502.399 501.499 450.954 527.529 397.683 547.848C291.35 588.405 168.716 609.526 102.178 609.526C87.0585 609.526 72.8001 608.95 62.1855 605.926C57.4532 604.578 46.3347 600.898 38.8379 589.972C29.2589 576.011 32.4856 561.518 35.9287 553.826C38.9579 547.059 43.4897 541.892 46.1543 539.022C49.2278 535.711 52.7409 532.433 55.9189 529.542C62.856 523.233 69.5076 517.541 77.0127 510.174C91.7229 495.734 104.656 479.491 110.5 460.366C115.941 442.559 116.348 418.634 99.0732 385.755L98.5449 384.75L98.0879 383.711C52.1197 279.074 81.3762 188.96 139.93 127.038C196.638 67.0673 281.332 32.5265 352.422 32.5265Z"
                            fill="#913ff5ff"
                            stroke={theme.palette.mode === 'dark' ? 'black' : theme.palette.primary.main}
                            strokeWidth="20" />
                        <motion.g variants={typingContainerVariants} initial="initial" animate="animate">
                            {/* Ponto 1 */}
                            <motion.path
                                variants={typingDotVariants}
                                d="M270.466 323.858C265.704 323.858 261.338 322.667 257.369 320.286C253.4 317.904 250.225 314.729 247.844 310.76C245.621 306.792 244.51 302.505 244.51 297.901C244.51 293.139 245.621 288.852 247.844 285.042C250.225 281.074 253.4 277.898 257.369 275.517C261.338 273.136 265.624 271.945 270.228 271.945C275.308 271.945 279.753 273.136 283.563 275.517C287.532 277.898 290.628 281.074 292.85 285.042C295.232 288.852 296.422 293.139 296.422 297.901C296.422 302.505 295.232 306.792 292.85 310.76C290.628 314.729 287.532 317.904 283.563 320.286C279.753 322.667 275.387 323.858 270.466 323.858Z"
                                fill="white" />
                            {/* Ponto 2 */}
                            <motion.path
                                variants={typingDotVariants}
                                d="M340.984 323.858C336.222 323.858 331.856 322.667 327.887 320.286C323.918 317.904 320.743 314.729 318.362 310.76C316.139 306.792 315.028 302.505 315.028 297.901C315.028 293.139 316.139 288.852 318.362 285.042C320.743 281.074 323.918 277.898 327.887 275.517C331.856 273.136 336.142 271.945 340.746 271.945C345.826 271.945 350.271 273.136 354.081 275.517C358.05 277.898 361.146 281.074 363.368 285.042C365.75 288.852 366.94 293.139 366.94 297.901C366.94 302.505 365.75 306.792 363.368 310.76C361.146 314.729 358.05 317.898 354.081 320.286C350.271 322.667 345.906 323.858 340.984 323.858Z"
                                fill="white" />
                            {/* Ponto 3 */}
                            <motion.path
                                variants={typingDotVariants}
                                d="M411.502 323.858C406.74 323.858 402.374 322.667 398.405 320.286C394.436 317.898 391.261 314.729 388.88 310.76C386.657 306.792 385.546 302.505 385.546 297.901C385.546 293.139 386.657 288.852 388.88 285.042C391.261 281.074 394.436 277.898 398.405 275.517C402.374 273.136 406.66 271.945 411.264 271.945C416.344 271.945 420.789 273.136 424.599 275.517C428.568 277.898 431.664 281.074 433.886 285.042C436.268 288.852 437.458 293.139 437.458 297.901C437.458 302.505 436.268 306.792 433.886 310.76C431.664 314.729 428.568 317.898 424.599 320.286C420.789 322.667 416.424 323.858 411.502 323.858Z"
                                fill="white" />
                        </motion.g>
                    </>
                )}
            </svg>
        </motion.div>
    )
}